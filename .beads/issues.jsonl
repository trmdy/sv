{"id":"sv-2pg","title":"CLI UX \u0026 Workflow Polish","description":"Background: The CLI currently mixes stub outputs, inconsistent messaging, and partial JSON support. To achieve a premium, Stripe-level UX, we need a consistent output contract, actionable guidance, and predictable error/exit semantics.\\n\\nGoals:\\n- Consistent, human-friendly output across commands with clear headings and next steps.\\n- Stable machine-readable JSON across all commands (schema versioned).\\n- Predictable exit codes and error messaging that are automation-safe.\\n- Terminology consistency (workspace vs worktree) and polished help text.\\n\\nNon-goals:\\n- Implementing missing core functionality (these tasks focus on UX and presentation).\\n- UI beyond CLI (no TUI/web).\\n\\nNotes:\\n- Coordinate with in-progress sv-8jf.9.2 (help text) to avoid duplication.\\n- Keep changes scoped and avoid refactors unrelated to UX output.\\n","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-31T15:22:37.919804447+01:00","created_by":"root","updated_at":"2025-12-31T15:22:37.919804447+01:00","dependencies":[{"issue_id":"sv-2pg","depends_on_id":"sv-8jf","type":"parent-child","created_at":"2025-12-31T15:26:16.504513244+01:00","created_by":"root"}]}
{"id":"sv-2pg.1","title":"CLI output style guide + JSON schema contract","description":"Create a self-contained doc that defines the human output format and JSON schema contract for sv commands. This is the single source of truth for UX consistency.\n\nInclude:\n- Output layout (header, bullet sections, warnings, next steps) with tone guidance (short, plain language, no emoji).\n- Error format for human + JSON (fields + exit code mapping).\n- JSON schema versioning and backwards-compatibility policy.\n- Rules for quiet mode and JSON mode (no extra noise).\n- Standard JSON envelope fields (e.g., schema_version, command, status, data, warnings, next_steps).\n- Examples for `sv init`, `sv take`, `sv protect status`, `sv status`.\n\nSuggested location: `agent_docs/workflows/cli_output.md`.\n\nRationale: A stable output contract makes the CLI feel premium and is critical for automation and future integrations.\n","acceptance_criteria":"Doc added with concrete examples and versioned JSON schema; approved by team; referenced by CLI output helpers.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T15:23:01.822241172+01:00","created_by":"root","updated_at":"2025-12-31T15:32:10.486784243+01:00","closed_at":"2025-12-31T15:32:10.486784243+01:00","close_reason":"Updated CLI output contract with tone guidance, JSON envelope fields, and refreshed examples.","dependencies":[{"issue_id":"sv-2pg.1","depends_on_id":"sv-2pg","type":"parent-child","created_at":"2025-12-31T15:23:01.829549946+01:00","created_by":"root"}]}
{"id":"sv-2pg.10","title":"Help text + onboarding examples alignment","description":"Coordinate with sv-8jf.9.2 to ensure help text examples are:\n- Consistent with the output style guide (sv-2pg.1).\n- Focused on common flows (init → take → commit, ws new → risk → hoist).\n- Including flag usage for --json/--events and error‑handling guidance.\n\nWhy: discoverability is a major UX lever for CLI tools.\n","acceptance_criteria":"Help text examples align with output style guide; no duplication with sv-8jf.9.2; examples include common flows (init → take → commit) and show flags.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T15:24:23.164133969+01:00","created_by":"root","updated_at":"2025-12-31T15:24:23.164133969+01:00","dependencies":[{"issue_id":"sv-2pg.10","depends_on_id":"sv-2pg","type":"parent-child","created_at":"2025-12-31T15:24:23.169357808+01:00","created_by":"root"},{"issue_id":"sv-2pg.10","depends_on_id":"sv-2pg.1","type":"blocks","created_at":"2025-12-31T15:25:56.388479696+01:00","created_by":"root"},{"issue_id":"sv-2pg.10","depends_on_id":"sv-8jf.9.2","type":"blocks","created_at":"2025-12-31T15:26:04.171638856+01:00","created_by":"root"}]}
{"id":"sv-2pg.11","title":"Dry-run/preview UX design (optional)","description":"Draft a design note for a future `--dry-run`/`--preview` flag:\n- Candidate commands: take, release, protect add/off, ws new/rm.\n- Expected output behavior in human/JSON modes.\n- Safety benefits and how it fits with event output.\n\nWhy: premium tools offer confidence-building previews for risky actions.\n","acceptance_criteria":"Design note added describing which commands get --dry-run, expected output behavior, and interaction with --json/--events.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T15:24:31.284011229+01:00","created_by":"root","updated_at":"2025-12-31T15:37:16.304527114+01:00","closed_at":"2025-12-31T15:37:16.304527114+01:00","close_reason":"Added dry-run/preview UX design note with command scope, output conventions, and events behavior.","dependencies":[{"issue_id":"sv-2pg.11","depends_on_id":"sv-2pg","type":"parent-child","created_at":"2025-12-31T15:24:31.285871327+01:00","created_by":"root"},{"issue_id":"sv-2pg.11","depends_on_id":"sv-2pg.1","type":"blocks","created_at":"2025-12-31T15:26:09.474426653+01:00","created_by":"root"}]}
{"id":"sv-2pg.2","title":"Output formatting helper module","description":"Implement a reusable output helper (e.g., src/output.rs) to centralize human + JSON formatting.\n\nRequirements:\n- Accept a structured payload and render in human or JSON modes.\n- Standard sections: header, details, warnings, next steps.\n- Allow command-specific fields without breaking schema contract.\n- Respect quiet mode (no human output) and JSON mode (no extra noise).\n\nWhy: Consistency + lower cognitive load makes the CLI feel premium and predictable.\n","acceptance_criteria":"Shared helper used by at least sv init/take/status; JSON and human output go through one path; quiet mode suppresses human output; JSON output matches schema from sv-2pg.1.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T15:23:30.361278165+01:00","created_by":"root","updated_at":"2025-12-31T15:34:53.802155254+01:00","dependencies":[{"issue_id":"sv-2pg.2","depends_on_id":"sv-2pg","type":"parent-child","created_at":"2025-12-31T15:23:30.367807561+01:00","created_by":"root"},{"issue_id":"sv-2pg.2","depends_on_id":"sv-2pg.1","type":"blocks","created_at":"2025-12-31T15:24:39.677422609+01:00","created_by":"root"}]}
{"id":"sv-2pg.3","title":"Error/exit consistency + single error emitter","description":"Unify error handling so that:\n- Commands return Result without printing success on error.\n- CLI entrypoint handles formatting and exit codes (2/3/4) in one place.\n- JSON mode emits a single structured error object (schema in sv-2pg.1).\n\nWhy: prevents confusing mixed output and makes automation reliable.\n","acceptance_criteria":"All commands return Result without printing success on error; errors are emitted once (human or JSON) with correct exit code; no command returns Ok(()) after reporting a conflict or error.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T15:23:36.21976276+01:00","created_by":"root","updated_at":"2025-12-31T15:23:36.21976276+01:00","dependencies":[{"issue_id":"sv-2pg.3","depends_on_id":"sv-2pg","type":"parent-child","created_at":"2025-12-31T15:23:36.225089824+01:00","created_by":"root"},{"issue_id":"sv-2pg.3","depends_on_id":"sv-2pg.1","type":"blocks","created_at":"2025-12-31T15:24:44.637731448+01:00","created_by":"root"},{"issue_id":"sv-2pg.3","depends_on_id":"sv-2pg.2","type":"blocks","created_at":"2025-12-31T15:24:49.72144397+01:00","created_by":"root"}]}
{"id":"sv-2pg.4","title":"Global output flags + events plumbing","description":"Add global output flags and event plumbing consistent with the output contract:\n- `--events [path]` emits JSONL event stream to stdout or file.\n- Define interaction with `--json` and `--quiet` (documented in sv-2pg.1).\n- Wire event emission for at least `sv take` (lease_created) and `sv release` (lease_released).\n\nWhy: integration‑friendly UX without forcing external coordinators.\n","acceptance_criteria":"CLI supports --events (stdout or file), --json behavior is consistent, and events are emitted as JSONL for relevant commands (at least sv take). Help text updated.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T15:23:42.630457317+01:00","created_by":"root","updated_at":"2025-12-31T15:23:42.630457317+01:00","dependencies":[{"issue_id":"sv-2pg.4","depends_on_id":"sv-2pg","type":"parent-child","created_at":"2025-12-31T15:23:42.636674594+01:00","created_by":"root"},{"issue_id":"sv-2pg.4","depends_on_id":"sv-2pg.1","type":"blocks","created_at":"2025-12-31T15:24:54.942408509+01:00","created_by":"root"},{"issue_id":"sv-2pg.4","depends_on_id":"sv-2pg.2","type":"blocks","created_at":"2025-12-31T15:24:59.721092316+01:00","created_by":"root"}]}
{"id":"sv-2pg.5","title":"sv init output polish","description":"Improve `sv init` UX:\n- Human output: clear summary of what changed and next recommended commands.\n- JSON output: structured report per schema.\n- Errors are surfaced with remediation (e.g., not a git repo, commondir issues).\n\nWhy: first‑run experience should feel polished and confidence‑building.\n","acceptance_criteria":"sv init uses the shared output helper and prints a clear summary, next steps, and JSON output that matches schema; no ambiguous 'nothing to do' without context.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T15:23:49.97024874+01:00","created_by":"root","updated_at":"2025-12-31T15:46:09.577165371+01:00","closed_at":"2025-12-31T15:46:09.577165371+01:00","close_reason":"sv init already uses output helper with summary/next steps and JSON schema","dependencies":[{"issue_id":"sv-2pg.5","depends_on_id":"sv-2pg","type":"parent-child","created_at":"2025-12-31T15:23:49.973949827+01:00","created_by":"root"},{"issue_id":"sv-2pg.5","depends_on_id":"sv-2pg.2","type":"blocks","created_at":"2025-12-31T15:25:04.576013676+01:00","created_by":"root"},{"issue_id":"sv-2pg.5","depends_on_id":"sv-2pg.3","type":"blocks","created_at":"2025-12-31T15:25:09.456767649+01:00","created_by":"root"}]}
{"id":"sv-2pg.6","title":"sv take output polish + actionable conflicts","description":"Improve `sv take` UX:\n- Human output: created leases, conflict summary, and suggested commands (e.g., `sv lease who \u003cpath\u003e`, `--allow-overlap`).\n- JSON output: include leases, conflicts, and summary counts.\n- Ensure exit behavior is consistent with conflict rules.\n\nWhy: leasing is the primary coordination action; UX should reduce friction.\n","acceptance_criteria":"sv take uses shared output helper; conflicts are summarized with clear next-step suggestions; JSON includes conflicts + created leases; exit codes match spec when conflicts occur.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T15:23:57.232968937+01:00","created_by":"root","updated_at":"2025-12-31T15:46:42.791720011+01:00","closed_at":"2025-12-31T15:46:42.791720011+01:00","close_reason":"sv take uses output helper with summary/conflicts/next steps; JSON includes conflicts + summary counts","dependencies":[{"issue_id":"sv-2pg.6","depends_on_id":"sv-2pg","type":"parent-child","created_at":"2025-12-31T15:23:57.253660718+01:00","created_by":"root"},{"issue_id":"sv-2pg.6","depends_on_id":"sv-2pg.2","type":"blocks","created_at":"2025-12-31T15:25:16.100930998+01:00","created_by":"root"},{"issue_id":"sv-2pg.6","depends_on_id":"sv-2pg.3","type":"blocks","created_at":"2025-12-31T15:25:20.672368109+01:00","created_by":"root"}]}
{"id":"sv-2pg.7","title":"sv protect status UX","description":"Implement a polished `sv protect status` UX:\n- Human output: list rules with mode, show disabled patterns for this workspace, and highlight staged matches.\n- JSON output: structured rules + match info.\n- Integrates with protected paths config (sv-8jf.4.1).\n\nWhy: users need fast clarity on why commits may be blocked.\n","acceptance_criteria":"sv protect status renders a clear table/list of rules, per-path mode overrides, workspace overrides, and staged matches; JSON output matches schema.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T15:24:03.76013554+01:00","created_by":"root","updated_at":"2025-12-31T15:24:03.76013554+01:00","dependencies":[{"issue_id":"sv-2pg.7","depends_on_id":"sv-2pg","type":"parent-child","created_at":"2025-12-31T15:24:03.765824156+01:00","created_by":"root"},{"issue_id":"sv-2pg.7","depends_on_id":"sv-2pg.2","type":"blocks","created_at":"2025-12-31T15:25:25.461883242+01:00","created_by":"root"},{"issue_id":"sv-2pg.7","depends_on_id":"sv-2pg.3","type":"blocks","created_at":"2025-12-31T15:25:29.516218786+01:00","created_by":"root"}]}
{"id":"sv-2pg.8","title":"sv status UX (single-pane view)","description":"Implement `sv status` as the CLI's \"single pane of glass\":\n- Show current actor, workspace name/path, base branch, and repo root.\n- Show active leases owned by actor (and conflicts if any).\n- Show protected path overrides for this workspace.\n- Display warnings (e.g., uninitialized sv, missing .sv.toml, expired leases).\n\nWhy: a premium CLI gives users a quick, confidence‑building snapshot.\n","acceptance_criteria":"sv status outputs a single cohesive summary: actor, workspace, base branch, active leases, protect overrides, and warnings; JSON output matches schema; supports --quiet/--json.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T15:24:10.648842683+01:00","created_by":"root","updated_at":"2025-12-31T15:24:10.648842683+01:00","dependencies":[{"issue_id":"sv-2pg.8","depends_on_id":"sv-2pg","type":"parent-child","created_at":"2025-12-31T15:24:10.654426131+01:00","created_by":"root"},{"issue_id":"sv-2pg.8","depends_on_id":"sv-2pg.2","type":"blocks","created_at":"2025-12-31T15:25:33.540198814+01:00","created_by":"root"},{"issue_id":"sv-2pg.8","depends_on_id":"sv-2pg.3","type":"blocks","created_at":"2025-12-31T15:25:38.180703707+01:00","created_by":"root"}]}
{"id":"sv-2pg.9","title":"Terminology consistency pass (workspace vs worktree)","description":"Audit and normalize terminology across help text and outputs:\n- Choose primary term (recommend: \"workspace\").\n- Update CLI help strings, command outputs, docs, and errors.\n- Ensure any mention of \"worktree\" is secondary/parenthetical.\n\nWhy: consistent language lowers confusion and feels more premium.\n","acceptance_criteria":"All user-facing text uses a single primary term (workspace), with worktree only as a parenthetical; help text and outputs updated; no mixed terms in the same command output.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T15:24:16.07685674+01:00","created_by":"root","updated_at":"2025-12-31T15:24:16.07685674+01:00","dependencies":[{"issue_id":"sv-2pg.9","depends_on_id":"sv-2pg","type":"parent-child","created_at":"2025-12-31T15:24:16.081629262+01:00","created_by":"root"},{"issue_id":"sv-2pg.9","depends_on_id":"sv-2pg.1","type":"blocks","created_at":"2025-12-31T15:25:46.204917273+01:00","created_by":"root"},{"issue_id":"sv-2pg.9","depends_on_id":"sv-8jf.9.2","type":"blocks","created_at":"2025-12-31T15:25:50.873220159+01:00","created_by":"root"}]}
{"id":"sv-8jf","title":"sv v0.1 MVP","description":"Complete MVP implementation of sv - Simultaneous Versioning CLI. Includes: workspaces, leases, protected paths, commit wrapper with Change-Id, and basic risk prediction. See PRODUCT_SPECIFICATION.md for full details.","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-31T14:35:40.509558162+01:00","created_by":"root","updated_at":"2025-12-31T14:35:40.509558162+01:00"}
{"id":"sv-8jf.1","title":"Foundation \u0026 Infrastructure","description":"Core infrastructure: project setup, CLI scaffolding, configuration system, storage layer, and concurrency primitives. Must be completed first - all other epics depend on this.","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-31T14:35:47.357154838+01:00","created_by":"root","updated_at":"2025-12-31T14:35:47.357154838+01:00","dependencies":[{"issue_id":"sv-8jf.1","depends_on_id":"sv-8jf","type":"parent-child","created_at":"2025-12-31T14:35:47.362054621+01:00","created_by":"root"}]}
{"id":"sv-8jf.1.1","title":"Project scaffolding: Cargo.toml, binary structure, workspace layout","description":"Initialize Rust project with:\n- Cargo.toml with dependencies (clap, serde, git2, tokio, etc.)\n- Binary entry point (src/main.rs)\n- Library structure (src/lib.rs)\n- Module organization plan\n- Basic error type scaffolding\n\nAcceptance: cargo build succeeds, sv --help shows skeleton","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-31T14:36:26.9595531+01:00","created_by":"root","updated_at":"2025-12-31T14:54:09.838643037+01:00","closed_at":"2025-12-31T14:54:09.838643037+01:00","close_reason":"Project scaffolding complete: cargo build succeeds, sv --help shows all subcommands. Foundation modules created: error.rs, cli/mod.rs, config.rs, lib.rs updated.","dependencies":[{"issue_id":"sv-8jf.1.1","depends_on_id":"sv-8jf.1","type":"parent-child","created_at":"2025-12-31T14:36:26.965707253+01:00","created_by":"root"}]}
{"id":"sv-8jf.1.10","title":"Event output for external integrations","description":"Implement optional event output stream:\n- --events flag to emit structured events to stdout/file\n- Events: lease_created, lease_released, workspace_created, commit_blocked, etc.\n- JSON format for machine consumption\n- Enables integration with MCP mail, Slack, etc. without hard dependency\n- Document event schema\n\nPer spec summary: 'optional event output so other systems can integrate'\n\nAcceptance: sv take --events emits JSON event for lease creation","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-31T14:45:20.028025646+01:00","created_by":"root","updated_at":"2025-12-31T15:01:35.708817944+01:00","dependencies":[{"issue_id":"sv-8jf.1.10","depends_on_id":"sv-8jf.1","type":"parent-child","created_at":"2025-12-31T14:45:20.032810686+01:00","created_by":"root"}]}
{"id":"sv-8jf.1.11","title":"Git worktree operations wrapper","description":"Implement Git worktree operations:\n- Enumerate existing worktrees (git worktree list)\n- Create new worktree with branch\n- Remove worktree\n- Handle worktree path resolution\n- Error handling for worktree operations\n\nAcceptance: can list, create, remove worktrees programmatically","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:45:51.971277132+01:00","created_by":"root","updated_at":"2025-12-31T15:08:16.826104751+01:00","closed_at":"2025-12-31T15:08:16.826104751+01:00","close_reason":"Implemented git worktree operations wrapper in src/git.rs: WorktreeInfo struct, list_worktrees(), create_worktree(), remove_worktree(), prune_worktrees(), common_dir(). 4 tests passing.","dependencies":[{"issue_id":"sv-8jf.1.11","depends_on_id":"sv-8jf.1","type":"parent-child","created_at":"2025-12-31T14:45:51.973046634+01:00","created_by":"root"},{"issue_id":"sv-8jf.1.11","depends_on_id":"sv-8jf.1.6","type":"blocks","created_at":"2025-12-31T14:46:38.373927334+01:00","created_by":"root"}]}
{"id":"sv-8jf.1.12","title":"Git branch and ref operations","description":"Implement branch/ref operations:\n- Create branch from ref\n- Delete branch\n- Get ref commit hash\n- Move branch ref (for undo)\n- Enumerate branches with pattern\n\nAcceptance: can create, query, manipulate branches","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:45:52.006143049+01:00","created_by":"root","updated_at":"2025-12-31T15:04:21.833661697+01:00","dependencies":[{"issue_id":"sv-8jf.1.12","depends_on_id":"sv-8jf.1","type":"parent-child","created_at":"2025-12-31T14:45:52.007767342+01:00","created_by":"root"},{"issue_id":"sv-8jf.1.12","depends_on_id":"sv-8jf.1.6","type":"blocks","created_at":"2025-12-31T14:46:38.405037612+01:00","created_by":"root"}]}
{"id":"sv-8jf.1.13","title":"Git diff operations for touched files","description":"Implement diff operations:\n- Get changed files between refs (git diff --name-only)\n- Get staged files list\n- Detect file status (added/modified/deleted)\n- Support pathspec filtering\n\nNeeded for: sv risk overlap detection, sv commit file list\n\nAcceptance: can enumerate touched/staged files accurately","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:45:52.041218639+01:00","created_by":"root","updated_at":"2025-12-31T15:13:43.309510532+01:00","closed_at":"2025-12-31T15:13:43.309510532+01:00","close_reason":"Implemented git diff operations in src/git.rs: FileStatus enum, FileChange struct, diff_files(), staged_files(), unstaged_files(), working_tree_changes(), file_statuses(), filter_changes_by_pathspec(), glob_match(). Also fixed Delta::Typechange typo. 10 git tests passing.","dependencies":[{"issue_id":"sv-8jf.1.13","depends_on_id":"sv-8jf.1","type":"parent-child","created_at":"2025-12-31T14:45:52.043006388+01:00","created_by":"root"},{"issue_id":"sv-8jf.1.13","depends_on_id":"sv-8jf.1.6","type":"blocks","created_at":"2025-12-31T14:46:38.435636995+01:00","created_by":"root"}]}
{"id":"sv-8jf.1.14","title":"Git commit and trailer manipulation","description":"Implement commit operations:\n- Create commit with message\n- Amend commit message\n- Parse commit trailers (Change-Id)\n- Inject/modify trailers\n- Support for -m, -F message sources\n\nAcceptance: can create commits with trailers, parse existing trailers","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:45:52.080641113+01:00","created_by":"root","updated_at":"2025-12-31T15:19:34.413181793+01:00","closed_at":"2025-12-31T15:19:34.413181793+01:00","close_reason":"Implemented git commit creation (create_commit, amend_commit_message), generic trailer parsing (parse_trailers, find_trailer), and trailer modification (set_trailer, remove_trailer). All 26 git tests pass.","dependencies":[{"issue_id":"sv-8jf.1.14","depends_on_id":"sv-8jf.1","type":"parent-child","created_at":"2025-12-31T14:45:52.082273159+01:00","created_by":"root"},{"issue_id":"sv-8jf.1.14","depends_on_id":"sv-8jf.1.6","type":"blocks","created_at":"2025-12-31T14:46:38.465453856+01:00","created_by":"root"}]}
{"id":"sv-8jf.1.2","title":"CLI framework: clap setup with global flags","description":"Implement CLI framework using clap:\n- Global flags: --repo, --actor, --json, --quiet, --verbose\n- Subcommand structure for: ws, take, release, lease, protect, commit, risk, op\n- Exit code constants (0, 2, 3, 4 per spec)\n- JSON output mode infrastructure\n\nAcceptance: sv --help shows all subcommand stubs, global flags work","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-31T14:36:30.421595563+01:00","created_by":"root","updated_at":"2025-12-31T14:53:19.836364287+01:00","closed_at":"2025-12-31T14:53:19.836364287+01:00","close_reason":"Complete: CLI framework with clap, all global flags (--repo, --actor, --json, --quiet, --verbose), all subcommand stubs, exit codes defined","dependencies":[{"issue_id":"sv-8jf.1.2","depends_on_id":"sv-8jf.1","type":"parent-child","created_at":"2025-12-31T14:36:30.426515155+01:00","created_by":"root"}]}
{"id":"sv-8jf.1.3","title":"Configuration system: .sv.toml parsing and defaults","description":"Implement configuration loading:\n- Parse .sv.toml from repo root\n- Default values (base=main, default_strength=cooperative, default_ttl=2h, etc.)\n- Config struct with serde\n- Validation and error messages\n- Config lookup from any subdirectory\n\nSchema per Appendix A of PRODUCT_SPECIFICATION.md\n\nAcceptance: sv reads .sv.toml, applies defaults, reports errors for invalid config","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-31T14:36:33.945807721+01:00","created_by":"root","updated_at":"2025-12-31T14:53:20.786804734+01:00","closed_at":"2025-12-31T14:53:20.786804734+01:00","close_reason":"Complete: Config struct with serde, .sv.toml parsing, defaults for base/actor/leases/protect, load_from_repo method","dependencies":[{"issue_id":"sv-8jf.1.3","depends_on_id":"sv-8jf.1","type":"parent-child","created_at":"2025-12-31T14:36:33.953005177+01:00","created_by":"root"}]}
{"id":"sv-8jf.1.4","title":"Storage layer: .sv/ and .git/sv/ directory structure","description":"Implement storage layer:\n- .sv/ for workspace-local state (ignored)\n- .git/sv/ for shared local state per clone (ignored)\n  - workspaces.json registry\n  - leases.jsonl (or sqlite later)\n  - oplog/ directory\n- Ensure directories created atomically\n- Git ignore entries if needed\n\nAcceptance: sv init creates correct structure, directories persist across commands","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:36:37.793791256+01:00","created_by":"root","updated_at":"2025-12-31T14:58:22.381693208+01:00","closed_at":"2025-12-31T14:58:22.381693208+01:00","close_reason":"Complete: Storage module implemented with .sv/ (local) and .git/sv/ (shared) directories, atomic writes, JSONL support, workspaces registry, actor persistence. All 7 tests pass.","dependencies":[{"issue_id":"sv-8jf.1.4","depends_on_id":"sv-8jf.1","type":"parent-child","created_at":"2025-12-31T14:36:37.798775495+01:00","created_by":"root"}]}
{"id":"sv-8jf.1.5","title":"Concurrency: file locking primitives for .git/sv/","description":"Implement concurrency-safe file operations:\n- File locking (flock or equivalent) for .git/sv/ writes\n- Atomic write pattern (write temp + rename)\n- Lock timeout with configurable wait\n- Error handling for lock contention\n\nCritical for multi-agent safety per spec Section 13.4\n\nAcceptance: concurrent sv processes don't corrupt state, locks timeout gracefully","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:36:41.368987822+01:00","created_by":"root","updated_at":"2025-12-31T15:02:00.802824964+01:00","closed_at":"2025-12-31T15:02:00.802824964+01:00","close_reason":"Implemented file locking primitives in src/lock.rs: FileLock with timeout-based acquisition, try_acquire, acquire_blocking, write_atomic_locked, read_locked, LockedOperation. 4 tests passing.","dependencies":[{"issue_id":"sv-8jf.1.5","depends_on_id":"sv-8jf.1","type":"parent-child","created_at":"2025-12-31T14:36:41.375987081+01:00","created_by":"root"}]}
{"id":"sv-8jf.1.6","title":"Git integration: libgit2 wrapper for repo discovery and operations","description":"Implement core Git integration layer:\n- Repo discovery (find .git from cwd or --repo)\n- Repository validation and error handling\n- Common Git state queries (current branch, HEAD, etc.)\n\nNOTE: This is the foundation. Worktree, branch, diff, and commit operations are separate tasks.\n\nAcceptance: sv correctly discovers and validates Git repository","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:36:44.421355921+01:00","created_by":"root","updated_at":"2025-12-31T15:10:02.564471894+01:00","closed_at":"2025-12-31T15:10:02.564471894+01:00","close_reason":"Complete: git.rs has discover_repo, open_repo, workdir, head_info. Worktree operations (list/create/remove) work. 4 tests pass. sv init correctly discovers repo.","dependencies":[{"issue_id":"sv-8jf.1.6","depends_on_id":"sv-8jf.1","type":"parent-child","created_at":"2025-12-31T14:36:44.42592576+01:00","created_by":"root"}]}
{"id":"sv-8jf.1.7","title":"Actor system: SV_ACTOR, --actor, sv actor set","description":"Implement actor identity:\n- Read from SV_ACTOR env var\n- Override via --actor flag\n- sv actor set \u003cname\u003e command to persist to .sv/\n- Actor used for lease ownership and op log attribution\n- Fallback to 'unknown' per config\n\nAcceptance: sv correctly identifies actor from all sources, persists setting","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:36:47.892271531+01:00","created_by":"root","updated_at":"2025-12-31T14:55:07.201470311+01:00","dependencies":[{"issue_id":"sv-8jf.1.7","depends_on_id":"sv-8jf.1","type":"parent-child","created_at":"2025-12-31T14:36:47.89690878+01:00","created_by":"root"}]}
{"id":"sv-8jf.1.8","title":"Error handling: structured errors with exit codes","description":"Implement error handling:\n- Error types for user error (2), policy block (3), operation failed (4)\n- Structured error messages (human + JSON modes)\n- Context propagation (which file, which lease, etc.)\n- Error chaining for debugging\n\nAcceptance: errors are clear, exit codes match spec, --json gives structured errors","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:36:50.94532698+01:00","created_by":"root","updated_at":"2025-12-31T14:53:52.318268725+01:00","dependencies":[{"issue_id":"sv-8jf.1.8","depends_on_id":"sv-8jf.1","type":"parent-child","created_at":"2025-12-31T14:36:50.952563475+01:00","created_by":"root"}]}
{"id":"sv-8jf.1.9","title":"sv init: initialize sv in a repository","description":"Implement sv init command:\n- Create .sv.toml with default config if not exists\n- Create .git/sv/ directory structure\n- Add .sv/ to .gitignore if not present\n- Validate this is a Git repository\n- Idempotent: safe to run multiple times\n\nAcceptance: sv init in a git repo creates config and storage dirs","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:45:03.439770786+01:00","created_by":"root","updated_at":"2025-12-31T15:01:49.772876944+01:00","closed_at":"2025-12-31T15:01:49.772876944+01:00","close_reason":"Implemented sv init command","dependencies":[{"issue_id":"sv-8jf.1.9","depends_on_id":"sv-8jf.1","type":"parent-child","created_at":"2025-12-31T14:45:03.44146799+01:00","created_by":"root"}]}
{"id":"sv-8jf.2","title":"Workspace Management","description":"Workspace (worktree) management: sv ws new, ws list, ws info, ws rm, ws here. Git worktrees as first-class agent sandboxes with registry and metadata tracking.","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-31T14:35:54.25423339+01:00","created_by":"root","updated_at":"2025-12-31T14:35:54.25423339+01:00","dependencies":[{"issue_id":"sv-8jf.2","depends_on_id":"sv-8jf","type":"parent-child","created_at":"2025-12-31T14:35:54.259031651+01:00","created_by":"root"},{"issue_id":"sv-8jf.2","depends_on_id":"sv-8jf.1","type":"blocks","created_at":"2025-12-31T14:41:01.628779945+01:00","created_by":"root"}]}
{"id":"sv-8jf.2.1","title":"sv ws new: create worktree with branch and registry entry","description":"Implement sv ws new \u003cname\u003e [--base \u003cref\u003e] [--dir \u003cpath\u003e] [--branch \u003cref\u003e] [--sparse \u003cpathspec...\u003e]:\n- Create Git worktree directory\n- Create branch (default: sv/ws/\u003cname\u003e)\n- Register in .git/sv/workspaces.json\n- Support --base to specify starting point (default from .sv.toml)\n- Support --dir to specify custom directory path\n- Support --sparse for sparse checkout (optional v0.1)\n\nAcceptance: sv ws new agent1 creates worktree, branch sv/ws/agent1, registry entry","status":"in_progress","priority":0,"issue_type":"task","created_at":"2025-12-31T14:37:02.934909388+01:00","created_by":"root","updated_at":"2025-12-31T15:20:47.295533995+01:00","dependencies":[{"issue_id":"sv-8jf.2.1","depends_on_id":"sv-8jf.2","type":"parent-child","created_at":"2025-12-31T14:37:02.938668862+01:00","created_by":"root"}]}
{"id":"sv-8jf.2.2","title":"sv ws here: register current directory as workspace","description":"Implement sv ws here [--name \u003cname\u003e]:\n- Register current directory as workspace (for single-checkout usage)\n- Auto-derive name from directory or branch if not specified\n- Create .sv/ local state directory\n- Add to .git/sv/workspaces.json\n- Validate it's a valid Git checkout\n\nAcceptance: sv ws here in main checkout registers it, sv ws list shows it","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T14:37:05.496873944+01:00","created_by":"root","updated_at":"2025-12-31T14:37:05.496873944+01:00","dependencies":[{"issue_id":"sv-8jf.2.2","depends_on_id":"sv-8jf.2","type":"parent-child","created_at":"2025-12-31T14:37:05.501631323+01:00","created_by":"root"}]}
{"id":"sv-8jf.2.3","title":"sv ws list: enumerate workspaces with status","description":"Implement sv ws list [-s \u003cselector\u003e]:\n- List all registered workspaces\n- Show: name, path, branch, base, actor (if set), ahead/behind status, last activity\n- Support --json output\n- Selector filtering deferred to selector epic (stub for now)\n\nAcceptance: sv ws list shows all workspaces with accurate status","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T14:37:07.838415923+01:00","created_by":"root","updated_at":"2025-12-31T15:43:11.711779985+01:00","dependencies":[{"issue_id":"sv-8jf.2.3","depends_on_id":"sv-8jf.2","type":"parent-child","created_at":"2025-12-31T14:37:07.843041395+01:00","created_by":"root"}]}
{"id":"sv-8jf.2.4","title":"sv ws info: detailed workspace information","description":"Implement sv ws info \u003cname\u003e:\n- Show detailed workspace info:\n  - name, path, branch, base ref\n  - touched paths (files changed vs base)\n  - leases affecting this workspace\n  - ahead/behind counts vs base and main\n  - recent Change-Ids (if any)\n  - actor assignment\n  - last activity timestamp\n\nAcceptance: sv ws info agent1 shows comprehensive details","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T14:37:10.081126702+01:00","created_by":"root","updated_at":"2025-12-31T14:37:10.081126702+01:00","dependencies":[{"issue_id":"sv-8jf.2.4","depends_on_id":"sv-8jf.2","type":"parent-child","created_at":"2025-12-31T14:37:10.084969381+01:00","created_by":"root"}]}
{"id":"sv-8jf.2.5","title":"sv ws rm: remove worktree and unregister","description":"Implement sv ws rm \u003cname\u003e [--force]:\n- Remove Git worktree (git worktree remove)\n- Unregister from .git/sv/workspaces.json\n- Do NOT delete commits (branches preserved unless explicit)\n- --force to remove even with uncommitted changes\n- Record operation in oplog for undo\n\nAcceptance: sv ws rm agent1 removes worktree, can be undone","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T14:37:12.452253075+01:00","created_by":"root","updated_at":"2025-12-31T14:37:12.452253075+01:00","dependencies":[{"issue_id":"sv-8jf.2.5","depends_on_id":"sv-8jf.2","type":"parent-child","created_at":"2025-12-31T14:37:12.459160607+01:00","created_by":"root"}]}
{"id":"sv-8jf.2.6","title":"Workspace registry: JSON schema and CRUD operations","description":"Implement workspace registry (.git/sv/workspaces.json):\n- Schema: id, name, path, branch, base, actor, created_at, last_active\n- CRUD operations with file locking\n- Validation (no duplicate names, paths exist)\n- Cleanup of stale entries (path doesn't exist)\n- Atomic updates\n\nAcceptance: registry survives concurrent access, validates entries","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:37:15.228716162+01:00","created_by":"root","updated_at":"2025-12-31T15:18:28.562815396+01:00","closed_at":"2025-12-31T15:18:28.562815396+01:00","close_reason":"Implemented workspace registry CRUD + validation","dependencies":[{"issue_id":"sv-8jf.2.6","depends_on_id":"sv-8jf.2","type":"parent-child","created_at":"2025-12-31T14:37:15.232253162+01:00","created_by":"root"}]}
{"id":"sv-8jf.2.7","title":"sv status: current workspace overview","description":"Implement sv status command for quick overview:\n- Current workspace name and branch\n- Actor identity\n- Active leases held by current actor\n- Protected paths that would block commit\n- Ahead/behind vs base\n- Any active conflicts or warnings\n\nConvenience command combining ws info + lease ls + protect status\n\nAcceptance: sv status shows comprehensive current state at a glance","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-31T14:45:23.167953368+01:00","created_by":"root","updated_at":"2025-12-31T15:36:00.837029311+01:00","dependencies":[{"issue_id":"sv-8jf.2.7","depends_on_id":"sv-8jf.2","type":"parent-child","created_at":"2025-12-31T14:45:23.174470764+01:00","created_by":"root"}]}
{"id":"sv-8jf.3","title":"Lease System","description":"Graded reservation system: sv take, release, lease ls, lease who, lease renew, lease break. Supports observe/cooperative/strong/exclusive strengths with intent annotations and TTL.","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-31T14:35:56.517033985+01:00","created_by":"root","updated_at":"2025-12-31T14:35:56.517033985+01:00","dependencies":[{"issue_id":"sv-8jf.3","depends_on_id":"sv-8jf","type":"parent-child","created_at":"2025-12-31T14:35:56.523794657+01:00","created_by":"root"},{"issue_id":"sv-8jf.3","depends_on_id":"sv-8jf.1","type":"blocks","created_at":"2025-12-31T14:41:01.652998504+01:00","created_by":"root"}]}
{"id":"sv-8jf.3.1","title":"Lease data model: schema and storage format","description":"Design and implement lease data model:\n- Fields: id (uuid), pathspec, strength (observe|cooperative|strong|exclusive), intent (bugfix|feature|docs|refactor|rename|format|mechanical|investigation|other), actor, scope (repo|branch:\u003cname\u003e|ws:\u003cworkspace\u003e), note, ttl, expires_at, hints (optional: symbols, lines)\n- JSONL storage format in .git/sv/leases.jsonl\n- Serde serialization/deserialization\n- Validation rules\n\nPer spec Section 3.4\n\nAcceptance: lease struct serializes correctly, validation catches invalid data","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-31T14:37:26.863512092+01:00","created_by":"root","updated_at":"2025-12-31T15:03:07.614254771+01:00","closed_at":"2025-12-31T15:03:07.614254771+01:00","close_reason":"Lease data model complete: LeaseStrength (observe/cooperative/strong/exclusive), LeaseIntent (9 types), LeaseScope (repo/branch/ws), Lease struct with all fields, LeaseBuilder, LeaseStore with conflict detection. 11 tests pass.","dependencies":[{"issue_id":"sv-8jf.3.1","depends_on_id":"sv-8jf.3","type":"parent-child","created_at":"2025-12-31T14:37:26.870540966+01:00","created_by":"root"}]}
{"id":"sv-8jf.3.10","title":"Ownerless lease support","description":"Implement ownerless leases per spec Section 6.3:\n- Allow sv take without actor set (creates ownerless lease)\n- Ownerless leases act as 'shared warnings' / 'FYI hot zones'\n- Anyone can release ownerless leases\n- Show clearly in sv lease ls output (no actor column or 'shared')\n- Compatibility: ownerless leases don't block others, just warn\n\nAcceptance: sv take src/hot/** with no actor creates shared warning lease","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-31T14:45:08.661843856+01:00","created_by":"root","updated_at":"2025-12-31T15:25:25.491959377+01:00","dependencies":[{"issue_id":"sv-8jf.3.10","depends_on_id":"sv-8jf.3","type":"parent-child","created_at":"2025-12-31T14:45:08.66647782+01:00","created_by":"root"}]}
{"id":"sv-8jf.3.11","title":"Lease note requirement validation","description":"Enforce --note requirement for strong/exclusive leases:\n- strong strength: require --note flag\n- exclusive strength: require --note flag\n- cooperative/observe: --note optional\n- Clear error message if note missing\n- Configurable in .sv.toml (can disable requirement)\n\nPer spec Section 3.4: 'note (required for strong|exclusive, optional otherwise)'\n\nAcceptance: sv take --strength exclusive fails without --note","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:45:11.19864062+01:00","created_by":"root","updated_at":"2025-12-31T15:08:54.339034299+01:00","dependencies":[{"issue_id":"sv-8jf.3.11","depends_on_id":"sv-8jf.3","type":"parent-child","created_at":"2025-12-31T14:45:11.205695321+01:00","created_by":"root"}]}
{"id":"sv-8jf.3.2","title":"sv take: create lease reservations","description":"Implement sv take \u003cpathspec...\u003e [--strength \u003clvl\u003e] [--intent \u003ckind\u003e] [--scope \u003cscope\u003e] [--ttl \u003cdur\u003e] [--note \u003ctext\u003e] [--hint-lines ...] [--hint-symbol ...]:\n- Parse and validate all flags\n- Validate pathspec syntax (file/dir/glob)\n- Generate lease UUID\n- Compute expires_at from TTL\n- Assign current actor as owner (or ownerless if no actor)\n- Write lease to .git/sv/leases.jsonl\n\nNOTE: Conflict detection uses the compatibility rules from sv-8jf.3.8.\nNOTE: Note requirement validation is in sv-8jf.3.11.\n\nAcceptance: sv take src/auth/** creates lease record with all fields","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-31T14:37:31.32987564+01:00","created_by":"root","updated_at":"2025-12-31T15:14:36.21681252+01:00","closed_at":"2025-12-31T15:14:36.21681252+01:00","close_reason":"sv take implemented: creates leases with UUID, pathspec, strength, intent, scope, TTL, note, actor; conflict detection works; JSON output; writes to .git/sv/leases.jsonl","dependencies":[{"issue_id":"sv-8jf.3.2","depends_on_id":"sv-8jf.3","type":"parent-child","created_at":"2025-12-31T14:37:31.336496022+01:00","created_by":"root"}]}
{"id":"sv-8jf.3.3","title":"sv release: release lease reservations","description":"Implement sv release \u003clease-id...\u003e | sv release \u003cpathspec...\u003e:\n- Release by explicit lease ID\n- Or release by pathspec match (releases all matching leases owned by current actor)\n- Mark lease as released (don't delete for audit trail)\n- Validate actor ownership (can't release others' leases without --force)\n\nAcceptance: sv release src/auth/** releases matching leases","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:37:34.297435394+01:00","created_by":"root","updated_at":"2025-12-31T15:25:28.573891358+01:00","closed_at":"2025-12-31T15:25:28.573891358+01:00","close_reason":"Implemented sv release command in src/cli/release.rs. Features: release by UUID or pathspec, ownership validation, --force flag for override, JSON output. Marks leases as released (preserves audit trail). All tests passing.","dependencies":[{"issue_id":"sv-8jf.3.3","depends_on_id":"sv-8jf.3","type":"parent-child","created_at":"2025-12-31T14:37:34.304257869+01:00","created_by":"root"}]}
{"id":"sv-8jf.3.4","title":"sv lease ls: list active leases","description":"Implement sv lease ls [-s \u003cselector\u003e]:\n- List all active (non-expired, non-released) leases\n- Show: id, pathspec, strength, intent, actor, scope, expires_at, note\n- Support --json output\n- Selector filtering (stub for now)\n- Filter by actor with --actor flag\n\nAcceptance: sv lease ls shows all active leases with details","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:37:36.654393586+01:00","created_by":"root","updated_at":"2025-12-31T15:19:35.522694706+01:00","closed_at":"2025-12-31T15:19:35.522694706+01:00","close_reason":"Implemented sv lease ls and sv lease who commands in src/cli/lease.rs. Features: list active leases with --json output, filter by --actor, show lease holders for a path. All tests passing.","dependencies":[{"issue_id":"sv-8jf.3.4","depends_on_id":"sv-8jf.3","type":"parent-child","created_at":"2025-12-31T14:37:36.658796334+01:00","created_by":"root"}]}
{"id":"sv-8jf.3.5","title":"sv lease who: show lease holders for path","description":"Implement sv lease who \u003cpath\u003e:\n- Find all leases that overlap with the given path\n- Show holder info: actor, strength, intent, note, expires_at\n- Handle glob matching (both directions: lease glob matches path, path matches lease glob)\n- Useful for 'who is working on this file?'\n\nAcceptance: sv lease who src/auth/login.rs shows overlapping leases","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:37:39.904847048+01:00","created_by":"root","updated_at":"2025-12-31T15:20:30.529474666+01:00","closed_at":"2025-12-31T15:20:30.529474666+01:00","close_reason":"Already implemented as part of sv-8jf.3.4 - sv lease who command is working in src/cli/lease.rs","dependencies":[{"issue_id":"sv-8jf.3.5","depends_on_id":"sv-8jf.3","type":"parent-child","created_at":"2025-12-31T14:37:39.911949322+01:00","created_by":"root"}]}
{"id":"sv-8jf.3.6","title":"sv lease renew: extend lease TTL","description":"Implement sv lease renew \u003clease-id...\u003e [--ttl \u003cdur\u003e]:\n- Extend expires_at for specified leases\n- Validate actor ownership\n- Default extension: original TTL or config default\n- Can renew multiple leases at once\n\nAcceptance: sv lease renew \u003cid\u003e --ttl 4h extends expiry","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:37:42.592915855+01:00","created_by":"root","updated_at":"2025-12-31T15:22:51.485433012+01:00","dependencies":[{"issue_id":"sv-8jf.3.6","depends_on_id":"sv-8jf.3","type":"parent-child","created_at":"2025-12-31T14:37:42.597728387+01:00","created_by":"root"}]}
{"id":"sv-8jf.3.7","title":"sv lease break: force-release with audit","description":"Implement sv lease break \u003clease-id...\u003e --reason \u003ctext\u003e:\n- Break-glass override to release any lease\n- Requires --reason (mandatory explanation)\n- Records break action in oplog with full audit trail\n- Notifies (via output) the affected actor\n\nAcceptance: sv lease break \u003cid\u003e --reason 'emergency fix' releases and audits","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-31T14:37:45.749906482+01:00","created_by":"root","updated_at":"2025-12-31T15:45:40.72588037+01:00","dependencies":[{"issue_id":"sv-8jf.3.7","depends_on_id":"sv-8jf.3","type":"parent-child","created_at":"2025-12-31T14:37:45.756541636+01:00","created_by":"root"}]}
{"id":"sv-8jf.3.8","title":"Lease compatibility rules and conflict detection","description":"Implement lease strength compatibility matrix:\n- observe overlaps with anything\n- cooperative overlaps with observe and cooperative\n- strong overlaps with observe; cooperative only with --allow-overlap; blocks strong/exclusive\n- exclusive blocks any overlapping lease except observe (configurable)\n\nInclude:\n- Pathspec overlap detection (glob matching)\n- Conflict checking on sv take\n- Policy overrides from .sv.toml\n\nPer spec Section 6.2\n\nAcceptance: conflicts detected correctly, policy overrides work","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-31T14:37:50.114993866+01:00","created_by":"root","updated_at":"2025-12-31T15:15:51.425994256+01:00","closed_at":"2025-12-31T15:15:51.425994256+01:00","close_reason":"Already implemented in src/lease.rs: LeaseStrength::is_compatible_with() has full compatibility matrix, LeaseStore::check_conflicts() handles pathspec overlap detection and strength checking, allow_overlap_cooperative policy configurable in .sv.toml","dependencies":[{"issue_id":"sv-8jf.3.8","depends_on_id":"sv-8jf.3","type":"parent-child","created_at":"2025-12-31T14:37:50.119751095+01:00","created_by":"root"}]}
{"id":"sv-8jf.3.9","title":"Lease TTL expiration and cleanup","description":"Implement lease expiration:\n- Check expires_at on all lease operations\n- Expired leases treated as inactive\n- Periodic cleanup (on any lease command) to archive expired leases\n- Grace period option (configurable)\n\nAcceptance: expired leases don't block, cleanup maintains performance","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:37:52.645022292+01:00","created_by":"root","updated_at":"2025-12-31T15:26:26.254724027+01:00","closed_at":"2025-12-31T15:26:26.254724027+01:00","close_reason":"Added lease expiration cleanup helpers, grace config, and wired cleanup into lease commands","dependencies":[{"issue_id":"sv-8jf.3.9","depends_on_id":"sv-8jf.3","type":"parent-child","created_at":"2025-12-31T14:37:52.653446126+01:00","created_by":"root"}]}
{"id":"sv-8jf.4","title":"Protected Paths","description":"Global protected path enforcement: sv protect add/status/off. Guards files like .beads/**, lockfiles from accidental commits. Supports guard/readonly/warn modes.","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-31T14:35:58.785513531+01:00","created_by":"root","updated_at":"2025-12-31T14:35:58.785513531+01:00","dependencies":[{"issue_id":"sv-8jf.4","depends_on_id":"sv-8jf","type":"parent-child","created_at":"2025-12-31T14:35:58.79024375+01:00","created_by":"root"},{"issue_id":"sv-8jf.4","depends_on_id":"sv-8jf.1","type":"blocks","created_at":"2025-12-31T14:41:01.677004195+01:00","created_by":"root"}]}
{"id":"sv-8jf.4.1","title":"Protected paths configuration in .sv.toml","description":"Implement protected paths configuration:\n- [protect] section in .sv.toml\n- mode = 'guard' | 'readonly' | 'warn' (default: guard)\n- paths = ['.beads/**', 'pnpm-lock.yaml', 'Cargo.lock', ...]\n- Glob pattern support\n- Per-path mode override\n\nPer spec Section 7 and Appendix A\n\nAcceptance: .sv.toml protect section parsed, patterns validated","status":"in_progress","priority":0,"issue_type":"task","created_at":"2025-12-31T14:38:03.660440622+01:00","created_by":"root","updated_at":"2025-12-31T15:14:37.487263917+01:00","dependencies":[{"issue_id":"sv-8jf.4.1","depends_on_id":"sv-8jf.4","type":"parent-child","created_at":"2025-12-31T14:38:03.667312941+01:00","created_by":"root"}]}
{"id":"sv-8jf.4.2","title":"sv protect status: show protection state","description":"Implement sv protect status:\n- Show all protected path patterns\n- Show enforcement mode for each\n- Show any per-workspace overrides\n- Indicate which patterns match current staged files (if any)\n\nAcceptance: sv protect status shows clear protection state","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:38:06.443977288+01:00","created_by":"root","updated_at":"2025-12-31T15:38:42.693340163+01:00","closed_at":"2025-12-31T15:38:42.693340163+01:00","close_reason":"Already implemented as part of sv-8jf.4.3. sv protect status is working in src/cli/protect.rs with JSON output. Shows patterns, modes, and disabled patterns per workspace.","dependencies":[{"issue_id":"sv-8jf.4.2","depends_on_id":"sv-8jf.4","type":"parent-child","created_at":"2025-12-31T14:38:06.449789368+01:00","created_by":"root"}]}
{"id":"sv-8jf.4.3","title":"sv protect add: add protected patterns","description":"Implement sv protect add \u003cpattern...\u003e [--mode guard|readonly|warn]:\n- Add patterns to .sv.toml [protect] section\n- Validate pattern syntax\n- Merge with existing patterns (no duplicates)\n- Default mode from config or guard\n\nAcceptance: sv protect add 'generated/**' updates .sv.toml","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:38:08.748854169+01:00","created_by":"root","updated_at":"2025-12-31T15:35:27.613474719+01:00","closed_at":"2025-12-31T15:35:27.613474719+01:00","close_reason":"Implemented sv protect add/rm/status commands in src/cli/protect.rs. Features: add patterns with --mode option, remove patterns with --force option, show status with JSON support. Validates pattern syntax, prevents duplicates, updates .sv.toml. All tests passing.","dependencies":[{"issue_id":"sv-8jf.4.3","depends_on_id":"sv-8jf.4","type":"parent-child","created_at":"2025-12-31T14:38:08.760384549+01:00","created_by":"root"}]}
{"id":"sv-8jf.4.4","title":"sv protect off: disable protection per-workspace","description":"Implement sv protect off \u003cpattern...\u003e [--workspace]:\n- Disable protection for specified patterns in current workspace only\n- Store override in .sv/ (local, ignored)\n- Does not modify .sv.toml\n- Useful for designated 'lockfile updater' workspace\n\nAcceptance: sv protect off pnpm-lock.yaml allows commits in this workspace only","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:38:11.817323007+01:00","created_by":"root","updated_at":"2025-12-31T15:23:53.5350989+01:00","dependencies":[{"issue_id":"sv-8jf.4.4","depends_on_id":"sv-8jf.4","type":"parent-child","created_at":"2025-12-31T14:38:11.826842974+01:00","created_by":"root"}]}
{"id":"sv-8jf.4.5","title":"Protected path enforcement during commit","description":"Integrate protected path checking into sv commit:\n- Detect if staged files match any protected patterns\n- guard mode: block commit with clear error (exit 3)\n- readonly mode: (future) prevent file modification entirely\n- warn mode: emit warning but allow commit\n- Check per-workspace overrides\n- Support --allow-protected flag to override\n\nAcceptance: sv commit blocks protected files unless override used","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-31T14:38:15.120891899+01:00","created_by":"root","updated_at":"2025-12-31T15:33:47.856924559+01:00","closed_at":"2025-12-31T15:33:47.856924559+01:00","close_reason":"Implemented protected path enforcement in commit: checks staged files against protect.paths patterns from .sv.toml, blocks (exit 3) for guard mode, warns for warn mode, supports --allow-protected override, JSON output includes protected_files details, respects per-workspace overrides","dependencies":[{"issue_id":"sv-8jf.4.5","depends_on_id":"sv-8jf.4","type":"parent-child","created_at":"2025-12-31T14:38:15.127834243+01:00","created_by":"root"}]}
{"id":"sv-8jf.4.6","title":"sv protect rm: remove protected patterns","description":"Implement sv protect rm \u003cpattern...\u003e:\n- Remove patterns from .sv.toml [protect] section\n- Match exact pattern strings\n- Error if pattern not found (unless --force)\n- Update file atomically\n\nAcceptance: sv protect rm 'generated/**' removes pattern from config","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T14:45:05.24735692+01:00","created_by":"root","updated_at":"2025-12-31T15:38:28.411251646+01:00","closed_at":"2025-12-31T15:38:28.411251646+01:00","close_reason":"Already implemented as part of sv-8jf.4.3. sv protect rm is working in src/cli/protect.rs with --force option and JSON output.","dependencies":[{"issue_id":"sv-8jf.4.6","depends_on_id":"sv-8jf.4","type":"parent-child","created_at":"2025-12-31T14:45:05.254275307+01:00","created_by":"root"}]}
{"id":"sv-8jf.5","title":"Commit Wrapper","description":"sv commit wrapper: protected-path blocking, lease conflict checking, Change-Id injection. Wraps git commit with coordination-aware checks. JJ-inspired stable change tracking.","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-31T14:36:00.888539207+01:00","created_by":"root","updated_at":"2025-12-31T14:36:00.888539207+01:00","dependencies":[{"issue_id":"sv-8jf.5","depends_on_id":"sv-8jf","type":"parent-child","created_at":"2025-12-31T14:36:00.894927+01:00","created_by":"root"},{"issue_id":"sv-8jf.5","depends_on_id":"sv-8jf.1","type":"blocks","created_at":"2025-12-31T14:41:01.700932039+01:00","created_by":"root"},{"issue_id":"sv-8jf.5","depends_on_id":"sv-8jf.4","type":"blocks","created_at":"2025-12-31T14:41:03.022486772+01:00","created_by":"root"},{"issue_id":"sv-8jf.5","depends_on_id":"sv-8jf.3","type":"blocks","created_at":"2025-12-31T14:41:03.044705996+01:00","created_by":"root"}]}
{"id":"sv-8jf.5.1","title":"sv commit: basic git commit wrapper","description":"Implement sv commit [sv-flags...] -- [git commit args...]:\n- Pass through to git commit\n- Support -m, -F, --amend, -a, --no-edit (v0.1 focus)\n- Determine set of paths to be committed (git diff --cached --name-only)\n- Handle -a flag (stage all modified)\n- Execute git commit with final message\n\nAcceptance: sv commit -m 'msg' works like git commit -m 'msg'","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-31T14:38:25.396981761+01:00","created_by":"root","updated_at":"2025-12-31T15:24:31.102551584+01:00","closed_at":"2025-12-31T15:24:31.102551584+01:00","close_reason":"Implemented sv commit wrapper: passes through to git commit with -m, -F, --amend, -a, --no-edit flags; determines staged files via git diff; handles empty commit case; JSON output support; tested manually and unit tests pass","dependencies":[{"issue_id":"sv-8jf.5.1","depends_on_id":"sv-8jf.5","type":"parent-child","created_at":"2025-12-31T14:38:25.403608972+01:00","created_by":"root"}]}
{"id":"sv-8jf.5.2","title":"Change-Id injection in commit messages","description":"Implement Change-Id trailer injection:\n- Generate stable UUID for Change-Id\n- Add 'Change-Id: \u003cuuid\u003e' trailer if missing\n- Preserve existing Change-Id on --amend\n- Handle -m flag (append to message)\n- Handle -F flag (append to file content)\n- Format per Git trailer conventions\n\nJJ-inspired per spec Section 3.6\n\nAcceptance: sv commit -m 'msg' produces commit with Change-Id trailer","status":"in_progress","priority":0,"issue_type":"task","created_at":"2025-12-31T14:38:29.187218078+01:00","created_by":"root","updated_at":"2025-12-31T15:11:03.930226987+01:00","dependencies":[{"issue_id":"sv-8jf.5.2","depends_on_id":"sv-8jf.5","type":"parent-child","created_at":"2025-12-31T14:38:29.192702126+01:00","created_by":"root"}]}
{"id":"sv-8jf.5.3","title":"Lease conflict checking during commit","description":"Implement lease conflict checking at commit time:\n- Get list of files being committed\n- Check for active exclusive/strong leases owned by OTHER actors\n- Block commit (exit 3) if conflict found\n- Optionally warn if committed paths were never leased (provenance warning; default warn-only)\n- Support --force-lease to override\n\nPer spec Section 6.4 - critical requirement\n\nAcceptance: sv commit blocked when touching file under others' exclusive lease","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-31T14:38:33.342668818+01:00","created_by":"root","updated_at":"2025-12-31T15:28:23.512110787+01:00","closed_at":"2025-12-31T15:28:23.512110787+01:00","close_reason":"Implemented lease conflict checking: checks staged files against active exclusive/strong leases from other actors, blocks commit with exit code 3 if conflicts found, supports --force-lease override, JSON output includes conflict details","dependencies":[{"issue_id":"sv-8jf.5.3","depends_on_id":"sv-8jf.5","type":"parent-child","created_at":"2025-12-31T14:38:33.349582408+01:00","created_by":"root"}]}
{"id":"sv-8jf.5.4","title":"Commit operation logging","description":"Record commit operations in oplog:\n- Log: commit hash, actor, timestamp, files changed, Change-Id\n- Record before/after ref state (for potential undo)\n- Include any policy overrides used (--allow-protected, --force-lease)\n\nAcceptance: sv op log shows commit history with details","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:38:35.987334842+01:00","created_by":"root","updated_at":"2025-12-31T15:34:02.447611601+01:00","dependencies":[{"issue_id":"sv-8jf.5.4","depends_on_id":"sv-8jf.5","type":"parent-child","created_at":"2025-12-31T14:38:35.991994935+01:00","created_by":"root"}]}
{"id":"sv-8jf.6","title":"Risk Prediction","description":"Overlap detection and conflict prediction: sv risk (fast mode). Computes touched-file overlaps across workspaces, incorporates lease metadata for risk scoring. --simulate deferred to v0.2.","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-31T14:36:02.990837381+01:00","created_by":"root","updated_at":"2025-12-31T14:36:02.990837381+01:00","dependencies":[{"issue_id":"sv-8jf.6","depends_on_id":"sv-8jf","type":"parent-child","created_at":"2025-12-31T14:36:02.995484215+01:00","created_by":"root"},{"issue_id":"sv-8jf.6","depends_on_id":"sv-8jf.1","type":"blocks","created_at":"2025-12-31T14:41:01.725262396+01:00","created_by":"root"},{"issue_id":"sv-8jf.6","depends_on_id":"sv-8jf.2","type":"blocks","created_at":"2025-12-31T14:41:03.942080239+01:00","created_by":"root"},{"issue_id":"sv-8jf.6","depends_on_id":"sv-8jf.3","type":"blocks","created_at":"2025-12-31T14:41:03.969533385+01:00","created_by":"root"}]}
{"id":"sv-8jf.6.1","title":"sv risk: basic overlap detection","description":"Implement sv risk [-s \u003cselector\u003e] [--base \u003cref\u003e]:\n- For each workspace (or selected workspaces):\n  - Compute touched files vs base: git diff --name-only \u003cbase\u003e..\u003cws-branch\u003e\n- Intersect touched sets across workspaces\n- Report overlap summary by file/directory\n- Support --json output\n\nAcceptance: sv risk shows file overlaps between active workspaces","status":"in_progress","priority":0,"issue_type":"task","created_at":"2025-12-31T14:38:45.26089426+01:00","created_by":"root","updated_at":"2025-12-31T15:15:36.946936185+01:00","dependencies":[{"issue_id":"sv-8jf.6.1","depends_on_id":"sv-8jf.6","type":"parent-child","created_at":"2025-12-31T14:38:45.268547849+01:00","created_by":"root"}]}
{"id":"sv-8jf.6.2","title":"Risk scoring with lease metadata","description":"Enhance sv risk with lease-aware scoring:\n- Factor in lease strength (exclusive/strong overlaps are higher risk)\n- Factor in intent (format/rename more likely to conflict)\n- Score overlaps: low/medium/high/critical\n- Highlight 'hot' overlaps requiring attention\n\nPer spec Section 9.1\n\nAcceptance: sv risk shows severity scores based on lease metadata","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:38:48.523475075+01:00","created_by":"root","updated_at":"2025-12-31T15:27:53.848548438+01:00","dependencies":[{"issue_id":"sv-8jf.6.2","depends_on_id":"sv-8jf.6","type":"parent-child","created_at":"2025-12-31T14:38:48.528315489+01:00","created_by":"root"}]}
{"id":"sv-8jf.6.3","title":"Risk suggested actions","description":"Add actionable suggestions to sv risk output:\n- Suggest: take lease / downgrade lease / rebase onto other workspace / pick another task\n- Prioritize by risk severity\n- Include specific commands to run\n- Format for human and JSON output\n\nAcceptance: sv risk shows clear next steps for each overlap","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:38:51.51354135+01:00","created_by":"root","updated_at":"2025-12-31T15:28:52.316315493+01:00","dependencies":[{"issue_id":"sv-8jf.6.3","depends_on_id":"sv-8jf.6","type":"parent-child","created_at":"2025-12-31T14:38:51.520032668+01:00","created_by":"root"}]}
{"id":"sv-8jf.7","title":"Operation Log \u0026 Undo","description":"JJ-inspired operation log: sv op log, sv undo. Records workspace creates/removes, ref moves. Enables safe automation with reversible operations.","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-31T14:36:05.052534021+01:00","created_by":"root","updated_at":"2025-12-31T14:36:05.052534021+01:00","dependencies":[{"issue_id":"sv-8jf.7","depends_on_id":"sv-8jf","type":"parent-child","created_at":"2025-12-31T14:36:05.057270118+01:00","created_by":"root"},{"issue_id":"sv-8jf.7","depends_on_id":"sv-8jf.1","type":"blocks","created_at":"2025-12-31T14:41:01.74985122+01:00","created_by":"root"}]}
{"id":"sv-8jf.7.1","title":"Operation log storage format and writing","description":"Implement operation log infrastructure:\n- Storage in .git/sv/oplog/ as append-only files\n- Schema: op_id, timestamp, actor, command, affected_refs, affected_workspaces, outcome, undo_data\n- Atomic append (lock + write + unlock)\n- Each major operation records its own log entry\n- undo_data captures old/new ref tips, created/deleted paths, lease changes\n\nPer spec Section 14\n\nAcceptance: operations recorded atomically, can be read back","status":"in_progress","priority":0,"issue_type":"task","created_at":"2025-12-31T14:39:01.25477358+01:00","created_by":"root","updated_at":"2025-12-31T15:32:59.150429457+01:00","dependencies":[{"issue_id":"sv-8jf.7.1","depends_on_id":"sv-8jf.7","type":"parent-child","created_at":"2025-12-31T14:39:01.261094773+01:00","created_by":"root"}]}
{"id":"sv-8jf.7.2","title":"sv op log: display operation history","description":"Implement sv op log:\n- Show operations in reverse chronological order\n- Display: op_id, timestamp, actor, command, affected refs/workspaces, outcome\n- Support --limit N to restrict output\n- Support --json output\n- Filter by actor, time range, operation type\n\nAcceptance: sv op log shows clear history of sv operations","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:39:03.937797677+01:00","created_by":"root","updated_at":"2025-12-31T15:10:21.787831388+01:00","dependencies":[{"issue_id":"sv-8jf.7.2","depends_on_id":"sv-8jf.7","type":"parent-child","created_at":"2025-12-31T14:39:03.942407855+01:00","created_by":"root"}]}
{"id":"sv-8jf.7.3","title":"sv undo: basic undo functionality","description":"Implement sv undo [--op \u003cid\u003e]:\n- Without --op: undo most recent undoable operation\n- With --op: undo specific operation\n- Undo semantics:\n  - Ref moves: restore to previous tips\n  - Workspace create: remove worktree (optionally --keep-worktree)\n  - Workspace remove: error (can't restore deleted worktree, only branches)\n  - Lease changes: restore previous state\n\nPer spec Section 14.2\n\nAcceptance: sv undo reverses last operation, shows what was undone","status":"in_progress","priority":0,"issue_type":"task","created_at":"2025-12-31T14:39:07.896627655+01:00","created_by":"root","updated_at":"2025-12-31T15:30:30.301678009+01:00","dependencies":[{"issue_id":"sv-8jf.7.3","depends_on_id":"sv-8jf.7","type":"parent-child","created_at":"2025-12-31T14:39:07.903683338+01:00","created_by":"root"}]}
{"id":"sv-8jf.7.4","title":"Undoable operation recording for ws/lease commands","description":"Ensure all major commands record undo information:\n- sv ws new: record worktree path, branch ref\n- sv ws rm: record branch ref (worktree can't be restored)\n- sv take: record created lease ids\n- sv release: record released lease state\n- sv commit: record old/new HEAD, Change-Id\n\nAcceptance: sv undo works for all documented operations","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T14:39:11.113276031+01:00","created_by":"root","updated_at":"2025-12-31T14:39:11.113276031+01:00","dependencies":[{"issue_id":"sv-8jf.7.4","depends_on_id":"sv-8jf.7","type":"parent-child","created_at":"2025-12-31T14:39:11.120617421+01:00","created_by":"root"}]}
{"id":"sv-8jf.8","title":"Testing \u0026 Quality","description":"Comprehensive test coverage for sv v0.1: unit tests, integration tests, multi-process concurrency tests. Test harness setup and CI configuration.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-31T14:40:16.393570494+01:00","created_by":"root","updated_at":"2025-12-31T14:40:16.393570494+01:00","dependencies":[{"issue_id":"sv-8jf.8","depends_on_id":"sv-8jf","type":"parent-child","created_at":"2025-12-31T14:40:16.401100457+01:00","created_by":"root"},{"issue_id":"sv-8jf.8","depends_on_id":"sv-8jf.2","type":"blocks","created_at":"2025-12-31T14:41:05.627535278+01:00","created_by":"root"},{"issue_id":"sv-8jf.8","depends_on_id":"sv-8jf.3","type":"blocks","created_at":"2025-12-31T14:41:05.647273654+01:00","created_by":"root"},{"issue_id":"sv-8jf.8","depends_on_id":"sv-8jf.4","type":"blocks","created_at":"2025-12-31T14:41:05.672810419+01:00","created_by":"root"},{"issue_id":"sv-8jf.8","depends_on_id":"sv-8jf.5","type":"blocks","created_at":"2025-12-31T14:41:05.69624237+01:00","created_by":"root"},{"issue_id":"sv-8jf.8","depends_on_id":"sv-8jf.6","type":"blocks","created_at":"2025-12-31T14:41:05.721659195+01:00","created_by":"root"},{"issue_id":"sv-8jf.8","depends_on_id":"sv-8jf.7","type":"blocks","created_at":"2025-12-31T14:41:05.748589207+01:00","created_by":"root"}]}
{"id":"sv-8jf.8.1","title":"Test harness setup: Git fixture creation","description":"Create test infrastructure:\n- Temporary Git repo creation for tests\n- Fixture helpers for worktrees, branches, commits\n- Test config with isolated .sv/ and .git/sv/\n- Cleanup utilities\n\nAcceptance: tests can spin up isolated repos quickly","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:40:26.06045956+01:00","created_by":"root","updated_at":"2025-12-31T15:10:31.053348879+01:00","dependencies":[{"issue_id":"sv-8jf.8.1","depends_on_id":"sv-8jf.8","type":"parent-child","created_at":"2025-12-31T14:40:26.06722653+01:00","created_by":"root"}]}
{"id":"sv-8jf.8.2","title":"Unit tests for core modules","description":"Unit test coverage for:\n- Config parsing\n- Lease data model and compatibility rules\n- Pathspec/glob matching\n- Change-Id generation and parsing\n- Error types\n\nTarget: 80%+ coverage on core logic","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:40:28.303218206+01:00","created_by":"root","updated_at":"2025-12-31T15:04:39.688518081+01:00","dependencies":[{"issue_id":"sv-8jf.8.2","depends_on_id":"sv-8jf.8","type":"parent-child","created_at":"2025-12-31T14:40:28.308739369+01:00","created_by":"root"}]}
{"id":"sv-8jf.8.3","title":"Integration tests for CLI commands","description":"Integration tests for workspace commands:\n- sv ws new/list/info/rm/here\n- sv status\n- Workspace registry operations\n- Test with real Git repos\n\nAcceptance: all workspace commands tested end-to-end","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:40:30.85422822+01:00","created_by":"root","updated_at":"2025-12-31T15:14:51.660214777+01:00","dependencies":[{"issue_id":"sv-8jf.8.3","depends_on_id":"sv-8jf.8","type":"parent-child","created_at":"2025-12-31T14:40:30.859187551+01:00","created_by":"root"}]}
{"id":"sv-8jf.8.4","title":"Concurrency stress tests","description":"Multi-process concurrency tests:\n- Parallel lease creation/release\n- Concurrent workspace registry updates\n- Oplog append under contention\n- File lock timeout behavior\n- No data corruption under stress\n\nCritical per spec Section 13.4","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:40:32.927603464+01:00","created_by":"root","updated_at":"2025-12-31T15:06:59.146128958+01:00","dependencies":[{"issue_id":"sv-8jf.8.4","depends_on_id":"sv-8jf.8","type":"parent-child","created_at":"2025-12-31T14:40:32.935867677+01:00","created_by":"root"}]}
{"id":"sv-8jf.8.5","title":"CI configuration (GitHub Actions)","description":"Set up CI pipeline:\n- Build on Linux/macOS/Windows\n- Run test suite\n- Clippy lint checks\n- Rustfmt formatting check\n- Release binary builds\n\nAcceptance: PRs automatically tested, releases automated","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-31T14:40:34.929858571+01:00","created_by":"root","updated_at":"2025-12-31T15:21:12.978650851+01:00","dependencies":[{"issue_id":"sv-8jf.8.5","depends_on_id":"sv-8jf.8","type":"parent-child","created_at":"2025-12-31T14:40:34.933884444+01:00","created_by":"root"}]}
{"id":"sv-8jf.8.6","title":"Integration tests: lease commands","description":"Integration tests for lease commands:\n- sv take/release\n- sv lease ls/who/renew/break\n- Lease conflict detection\n- TTL expiration behavior\n- Ownerless leases\n\nAcceptance: all lease commands tested end-to-end","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:46:04.624593697+01:00","created_by":"root","updated_at":"2025-12-31T15:22:56.403311615+01:00","dependencies":[{"issue_id":"sv-8jf.8.6","depends_on_id":"sv-8jf.8","type":"parent-child","created_at":"2025-12-31T14:46:04.626608657+01:00","created_by":"root"}]}
{"id":"sv-8jf.8.7","title":"Integration tests: protect and commit commands","description":"Integration tests for:\n- sv protect status/add/off/rm\n- sv commit with Change-Id injection\n- Protected path blocking\n- Lease conflict blocking\n- Override flags (--allow-protected, --force-lease)\n\nAcceptance: commit wrapper fully tested with all checks","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:46:04.6625204+01:00","created_by":"root","updated_at":"2025-12-31T15:18:21.035024259+01:00","dependencies":[{"issue_id":"sv-8jf.8.7","depends_on_id":"sv-8jf.8","type":"parent-child","created_at":"2025-12-31T14:46:04.664461318+01:00","created_by":"root"}]}
{"id":"sv-8jf.8.8","title":"Integration tests: risk and oplog commands","description":"Integration tests for:\n- sv risk overlap detection\n- sv risk scoring\n- sv op log\n- sv undo for various operations\n\nAcceptance: risk and oplog commands tested end-to-end","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:46:04.703075582+01:00","created_by":"root","updated_at":"2025-12-31T15:24:16.550974135+01:00","dependencies":[{"issue_id":"sv-8jf.8.8","depends_on_id":"sv-8jf.8","type":"parent-child","created_at":"2025-12-31T14:46:04.705207486+01:00","created_by":"root"}]}
{"id":"sv-8jf.9","title":"Documentation","description":"User documentation: README, CLI help text, man pages. Developer docs: CONTRIBUTING, architecture overview. Example workflows and integration guides.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-31T14:40:17.971514311+01:00","created_by":"root","updated_at":"2025-12-31T14:40:17.971514311+01:00","dependencies":[{"issue_id":"sv-8jf.9","depends_on_id":"sv-8jf","type":"parent-child","created_at":"2025-12-31T14:40:17.978229172+01:00","created_by":"root"}]}
{"id":"sv-8jf.9.1","title":"README with quickstart guide","description":"Create comprehensive README:\n- What sv is and why\n- Installation instructions\n- Quickstart guide (5 minute workflow)\n- Link to full documentation\n- Contributing section\n\nAcceptance: new user can install and use sv from README alone","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T14:40:36.983526659+01:00","created_by":"root","updated_at":"2025-12-31T14:58:10.407799031+01:00","closed_at":"2025-12-31T14:58:10.407799031+01:00","close_reason":"Added root README with quickstart, install, docs, contributing","dependencies":[{"issue_id":"sv-8jf.9.1","depends_on_id":"sv-8jf.9","type":"parent-child","created_at":"2025-12-31T14:40:36.990342341+01:00","created_by":"root"}]}
{"id":"sv-8jf.9.2","title":"CLI help text for all commands","description":"Write helpful CLI help text:\n- --help for every subcommand\n- Examples in help text\n- Clear parameter descriptions\n- Error message improvements\n\nAcceptance: sv \u003ccmd\u003e --help is sufficient for typical usage","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-31T14:40:38.823517711+01:00","created_by":"root","updated_at":"2025-12-31T15:06:27.836436387+01:00","dependencies":[{"issue_id":"sv-8jf.9.2","depends_on_id":"sv-8jf.9","type":"parent-child","created_at":"2025-12-31T14:40:38.833558256+01:00","created_by":"root"}]}
{"id":"sv-8jf.9.3","title":"Architecture documentation","description":"Developer documentation:\n- Architecture overview\n- Module structure\n- Storage format specs\n- Extension points\n- Testing guide\n\nAcceptance: new contributors can understand codebase from docs","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T14:40:40.077387213+01:00","created_by":"root","updated_at":"2025-12-31T15:11:12.427177274+01:00","closed_at":"2025-12-31T15:11:12.427177274+01:00","close_reason":"Added docs/testing.md and refreshed test runbook","dependencies":[{"issue_id":"sv-8jf.9.3","depends_on_id":"sv-8jf.9","type":"parent-child","created_at":"2025-12-31T14:40:40.082155598+01:00","created_by":"root"}]}
{"id":"sv-wzk","title":"sv v0.2 Enhanced Integration","description":"v0.2 features per roadmap: risk --simulate (virtual merge conflict prediction), sv onto with undo support, hoist stack strategy with Change-Id dedup, and selector language v1.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-31T14:39:20.624937368+01:00","created_by":"root","updated_at":"2025-12-31T14:39:20.624937368+01:00","dependencies":[{"issue_id":"sv-wzk","depends_on_id":"sv-8jf","type":"blocks","created_at":"2025-12-31T14:41:06.570269419+01:00","created_by":"root"}]}
{"id":"sv-wzk.1","title":"Risk --simulate: Virtual Merge Conflict Prediction","description":"Implement sv risk --simulate for actual conflict detection without working tree mutation. Run virtual merge simulations, detect true conflicts, report files with conflicts and conflict types.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-31T14:39:27.746360974+01:00","created_by":"root","updated_at":"2025-12-31T14:39:27.746360974+01:00","dependencies":[{"issue_id":"sv-wzk.1","depends_on_id":"sv-wzk","type":"parent-child","created_at":"2025-12-31T14:39:27.751903619+01:00","created_by":"root"}]}
{"id":"sv-wzk.1.1","title":"Virtual merge infrastructure using libgit2","description":"Implement virtual merge capability:\n- Create in-memory merge without touching working tree\n- Use libgit2's merge analysis and merge trees\n- Detect conflicts: content, add-add, modify-delete, rename\n- Return conflict report with file paths and types\n\nAcceptance: can simulate merge of two branches and detect conflicts","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:39:47.190423584+01:00","created_by":"root","updated_at":"2025-12-31T15:44:40.436211488+01:00","dependencies":[{"issue_id":"sv-wzk.1.1","depends_on_id":"sv-wzk.1","type":"parent-child","created_at":"2025-12-31T14:39:47.197499036+01:00","created_by":"root"}]}
{"id":"sv-wzk.1.2","title":"sv risk --simulate: conflict simulation mode","description":"Implement sv risk --simulate:\n- For selected workspace pairs or 'stack onto base'\n- Run virtual merge simulation\n- Report files with conflicts and conflict type\n- Emit machine-readable JSON for automation\n- Show summary of which workspace pairs would conflict\n\nAcceptance: sv risk --simulate shows true merge conflicts without modifying files","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T14:39:49.796109305+01:00","created_by":"root","updated_at":"2025-12-31T14:39:49.796109305+01:00","dependencies":[{"issue_id":"sv-wzk.1.2","depends_on_id":"sv-wzk.1","type":"parent-child","created_at":"2025-12-31T14:39:49.800921967+01:00","created_by":"root"}]}
{"id":"sv-wzk.2","title":"sv onto: Workspace-to-Workspace Rebase","description":"Implement sv onto \u003ctarget-workspace\u003e [--strategy rebase|merge|cherry-pick]: reposition current workspace branch on top of target. Full undo support, optional preflight risk --simulate integration.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-31T14:39:30.285826584+01:00","created_by":"root","updated_at":"2025-12-31T14:39:30.285826584+01:00","dependencies":[{"issue_id":"sv-wzk.2","depends_on_id":"sv-wzk","type":"parent-child","created_at":"2025-12-31T14:39:30.290582089+01:00","created_by":"root"}]}
{"id":"sv-wzk.2.1","title":"sv onto: basic workspace rebase","description":"Implement sv onto \u003ctarget-workspace\u003e [--strategy rebase|merge|cherry-pick] [--base \u003cref\u003e]:\n- Reposition current workspace branch on top of target's tip\n- Default strategy: rebase (linear history)\n- Handle conflicts with clear guidance\n- Record operation in oplog for undo\n\nAcceptance: sv onto agent5 rebases current workspace onto agent5's branch","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T14:39:52.051185779+01:00","created_by":"root","updated_at":"2025-12-31T14:39:52.051185779+01:00","dependencies":[{"issue_id":"sv-wzk.2.1","depends_on_id":"sv-wzk.2","type":"parent-child","created_at":"2025-12-31T14:39:52.05580539+01:00","created_by":"root"}]}
{"id":"sv-wzk.2.2","title":"sv onto: preflight risk integration","description":"Integrate sv risk --simulate with sv onto:\n- Optional --preflight flag to check before rebasing\n- Show predicted conflicts before attempting\n- Offer to abort or continue\n\nAcceptance: sv onto agent5 --preflight shows conflicts before attempting rebase","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T14:39:53.942938401+01:00","created_by":"root","updated_at":"2025-12-31T14:39:53.942938401+01:00","dependencies":[{"issue_id":"sv-wzk.2.2","depends_on_id":"sv-wzk.2","type":"parent-child","created_at":"2025-12-31T14:39:53.94925114+01:00","created_by":"root"}]}
{"id":"sv-wzk.3","title":"sv hoist: Bulk Integration","description":"Implement sv hoist -s \u003cselector\u003e -d \u003cdest-ref\u003e --strategy \u003cstack|rebase|merge\u003e: take many workspace branches and produce integrated view. Stack strategy with Change-Id deduplication, deterministic ordering.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-31T14:39:33.011814368+01:00","created_by":"root","updated_at":"2025-12-31T14:39:33.011814368+01:00","dependencies":[{"issue_id":"sv-wzk.3","depends_on_id":"sv-wzk","type":"parent-child","created_at":"2025-12-31T14:39:33.017242842+01:00","created_by":"root"}]}
{"id":"sv-wzk.3.1","title":"sv hoist: stack strategy implementation","description":"Implement sv hoist command structure and integration branch:\n- Parse -s selector, -d dest-ref, --strategy, --order flags\n- Create/update integration branch: sv/hoist/\u003cdest-ref\u003e\n- Reset integration branch to dest-ref\n- Command infrastructure and validation\n\nNOTE: Commit selection, deduplication, and replay are separate tasks.\n\nAcceptance: sv hoist parses args, creates integration branch structure","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T14:39:57.651519594+01:00","created_by":"root","updated_at":"2025-12-31T14:46:17.39266587+01:00","dependencies":[{"issue_id":"sv-wzk.3.1","depends_on_id":"sv-wzk.3","type":"parent-child","created_at":"2025-12-31T14:39:57.657413776+01:00","created_by":"root"}]}
{"id":"sv-wzk.3.2","title":"sv hoist: ordering modes","description":"Implement hoist ordering modes --order \u003cmode\u003e:\n- workspace (default): stable sort by workspace name, preserve commit order within each\n- time: sort by commit timestamp\n- explicit: take ordered list of workspaces or config-defined priority\n\nPer spec Section 11.2\n\nAcceptance: sv hoist --order workspace produces deterministic commit order","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T14:40:00.05454519+01:00","created_by":"root","updated_at":"2025-12-31T14:40:00.05454519+01:00","dependencies":[{"issue_id":"sv-wzk.3.2","depends_on_id":"sv-wzk.3","type":"parent-child","created_at":"2025-12-31T14:40:00.061119401+01:00","created_by":"root"}]}
{"id":"sv-wzk.3.3","title":"Change-Id deduplication logic","description":"Implement Change-Id deduplication for hoist:\n- Parse Change-Id trailers from commits\n- Group commits by Change-Id\n- Compare patch-ids for duplicates\n- If identical patch-id: include once\n- If diverged: require resolution (--prefer flag or config)\n- Emit warnings for diverged Change-Ids\n\nAcceptance: hoist correctly deduplicates same logical changes","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T14:40:02.944662936+01:00","created_by":"root","updated_at":"2025-12-31T14:40:02.944662936+01:00","dependencies":[{"issue_id":"sv-wzk.3.3","depends_on_id":"sv-wzk.3","type":"parent-child","created_at":"2025-12-31T14:40:02.950989246+01:00","created_by":"root"},{"issue_id":"sv-wzk.3.3","depends_on_id":"sv-wzk.3.6","type":"blocks","created_at":"2025-12-31T14:46:40.484684039+01:00","created_by":"root"}]}
{"id":"sv-wzk.3.4","title":"Hoist state storage and conflict records","description":"Implement hoist state persistence in .git/sv/hoist/:\n- Track last hoist operation per dest-ref\n- Store conflict records when --continue-on-conflict used\n- Track which commits were included/skipped\n- Enable resumption after conflict resolution\n- Clean up old hoist state on successful completion\n\nPer spec Section 13.3\n\nAcceptance: hoist state persists across invocations, conflicts tracked","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T14:45:14.080953957+01:00","created_by":"root","updated_at":"2025-12-31T14:45:14.080953957+01:00","dependencies":[{"issue_id":"sv-wzk.3.4","depends_on_id":"sv-wzk.3","type":"parent-child","created_at":"2025-12-31T14:45:14.085875011+01:00","created_by":"root"}]}
{"id":"sv-wzk.3.5","title":"sv hoist --continue-on-conflict flag","description":"Implement --continue-on-conflict for sv hoist:\n- On conflict: record conflicting commit, skip it, continue with rest\n- Report all skipped commits at end\n- Store conflict records in .git/sv/hoist/\n- Allow user to resolve and re-run\n- Clear summary of what succeeded vs failed\n\nPer spec Section 11.1\n\nAcceptance: sv hoist --continue-on-conflict skips conflicts and reports them","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T14:45:16.918193953+01:00","created_by":"root","updated_at":"2025-12-31T14:45:16.918193953+01:00","dependencies":[{"issue_id":"sv-wzk.3.5","depends_on_id":"sv-wzk.3","type":"parent-child","created_at":"2025-12-31T14:45:16.925193462+01:00","created_by":"root"}]}
{"id":"sv-wzk.3.6","title":"Hoist commit selection from workspaces","description":"Implement commit selection for hoist:\n- Apply selector to identify source workspaces\n- For each workspace, identify commits ahead of base\n- Apply ordering mode (workspace/time/explicit)\n- Build ordered commit list for replay\n\nDepends on: selector language implementation\n\nAcceptance: sv hoist correctly identifies commits to include from selected workspaces","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T14:46:17.421879647+01:00","created_by":"root","updated_at":"2025-12-31T14:46:17.421879647+01:00","dependencies":[{"issue_id":"sv-wzk.3.6","depends_on_id":"sv-wzk.3","type":"parent-child","created_at":"2025-12-31T14:46:17.423874826+01:00","created_by":"root"},{"issue_id":"sv-wzk.3.6","depends_on_id":"sv-wzk.3.1","type":"blocks","created_at":"2025-12-31T14:46:40.425497068+01:00","created_by":"root"}]}
{"id":"sv-wzk.3.7","title":"Hoist cherry-pick replay engine","description":"Implement commit replay for hoist:\n- Cherry-pick commits in order onto integration branch\n- Handle conflicts (fail or continue based on flag)\n- Track progress for resumption\n- Report success/failure per commit\n- Preserve Change-Id trailers\n\nAcceptance: sv hoist replays commits correctly, handles conflicts","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-31T14:46:17.46042713+01:00","created_by":"root","updated_at":"2025-12-31T14:46:17.46042713+01:00","dependencies":[{"issue_id":"sv-wzk.3.7","depends_on_id":"sv-wzk.3","type":"parent-child","created_at":"2025-12-31T14:46:17.462198324+01:00","created_by":"root"},{"issue_id":"sv-wzk.3.7","depends_on_id":"sv-wzk.3.6","type":"blocks","created_at":"2025-12-31T14:46:40.455320227+01:00","created_by":"root"}]}
{"id":"sv-wzk.4","title":"Selector Language v1","description":"Implement revset-inspired selector language for operating on sets of workspaces/leases/branches. Entities (ws, lease, branch), predicates (active, stale, name~, ahead, touching, blocked), operators (|, \u0026, ~).","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-31T14:39:35.205389945+01:00","created_by":"root","updated_at":"2025-12-31T14:39:35.205389945+01:00","dependencies":[{"issue_id":"sv-wzk.4","depends_on_id":"sv-wzk","type":"parent-child","created_at":"2025-12-31T14:39:35.208862428+01:00","created_by":"root"}]}
{"id":"sv-wzk.4.1","title":"Selector language: parser and AST","description":"Implement selector language parser:\n- Grammar for entities: ws(...), lease(...), branch(...)\n- Predicates: active, stale, name~'regex', ahead('ref'), touching('pathspec'), blocked\n- Operators: | (union), \u0026 (intersection), ~ (difference), parentheses\n- Parse to AST representation\n\nPer spec Section 12\n\nAcceptance: parse 'ws(active) \u0026 ahead(\"main\")' into AST","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T14:40:05.514915932+01:00","created_by":"root","updated_at":"2025-12-31T15:19:31.196219528+01:00","closed_at":"2025-12-31T15:19:31.196219528+01:00","close_reason":"Implemented selector AST + parser and added tests","dependencies":[{"issue_id":"sv-wzk.4.1","depends_on_id":"sv-wzk.4","type":"parent-child","created_at":"2025-12-31T14:40:05.520171737+01:00","created_by":"root"}]}
{"id":"sv-wzk.4.2","title":"Selector language: evaluation engine","description":"Implement selector evaluation:\n- Evaluate predicates against workspace/lease/branch data\n- Execute set operations (union, intersection, difference)\n- Return matching entities\n- Integrate with sv ws list -s, sv risk -s, sv hoist -s, sv lease ls -s\n\nAcceptance: selectors filter entities correctly across all commands","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-31T14:40:07.802900908+01:00","created_by":"root","updated_at":"2025-12-31T15:32:36.831847224+01:00","dependencies":[{"issue_id":"sv-wzk.4.2","depends_on_id":"sv-wzk.4","type":"parent-child","created_at":"2025-12-31T14:40:07.807696323+01:00","created_by":"root"}]}
